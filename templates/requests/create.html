{% extends 'base.html' %}

{% block title %}Create Relief Request{% endblock %}

{% block content %}
<div class="container">
    <div class="row mb-3">
        <div class="col-12">
            <h2 class="text-goj-green mb-1"><i class="bi bi-plus-circle"></i> Create Relief Request</h2>
            <p class="text-muted mb-0">Step 1 of 2: Provide request details</p>
        </div>
    </div>

    <div class="drims-card">
        <form method="POST" action="{{ url_for('requests.create_request') }}">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="agency_name" class="form-label">Requesting Agency</label>
                    <input type="text" class="form-control" id="agency_name" value="{{ current_user.agency.agency_name }}" readonly disabled>
                    <small class="text-muted">Your agency</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="request_date" class="form-label">Request Date *</label>
                    <input type="date" class="form-control" id="request_date" name="request_date" value="{{ today }}" max="{{ today }}" required>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="eligible_event_id" class="form-label">Disaster Event *</label>
                    <select class="form-select" id="eligible_event_id" name="eligible_event_id" required>
                        <option value="">Select event...</option>
                        {% for event in events %}
                        <option value="{{ event.event_id }}">{{ event.event_name }}</option>
                        {% endfor %}
                    </select>
                    <small class="text-muted">Select the disaster event this request is for</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="urgency_ind" class="form-label">Urgency Level *</label>
                    <select class="form-select" id="urgency_ind" name="urgency_ind" required>
                        <option value="">Select urgency...</option>
                        <option value="H">High - Emergency response required</option>
                        <option value="M">Medium - Urgent action needed</option>
                        <option value="L">Low - Standard processing</option>
                    </select>
                </div>
            </div>

            <div class="mb-3">
                <label for="rqst_notes_text" class="form-label">Request Notes</label>
                <textarea class="form-control" id="rqst_notes_text" name="rqst_notes_text" rows="4" placeholder="Provide additional details about this relief request..."></textarea>
                <small class="text-muted">Optional: Add context, special requirements, or delivery instructions</small>
            </div>

            <hr class="my-4">

            <div class="alert alert-info">
                <i class="bi bi-info-circle"></i>
                <strong>Next Step:</strong> After creating this request, you'll be able to add items with quantities and justifications before submitting to ODPEM.
            </div>

            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-goj">
                    <i class="bi bi-check-circle"></i> Create Request
                </button>
                <a href="{{ url_for('requests.list_requests') }}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
